<!DOCTYPE html>
<html>
    <head>
        <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.4.9/angular.min.js"></script>
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.2.0/jquery.min.js"></script>
        <script src="../ajax.min.js"></script>
        <script src="../../keys.min.js"></script>
        <link href="../editor.css" type="text/css" rel="stylesheet" media="all" />
        <script src="../../sleep.min.js"></script>
        <!--[if IE]>
            <meta http-equiv="refresh" content="1; url=../../unsupported-browser.htm" />
        <![endif]-->
        <script>
            function runServerSide(url) {
                get(url);
            }
        </script>
        <title>Project Editor &middot; ElementNetwork&#8480;</title>
        <script>
            function idMethod() {
	           return window.location.href.substring(window.location.href.lastIndexOf('#') + 1);
            }
            var projectId = idMethod();
            if ((projectId === window.location.href) || (projectId ===  "")) {
                /*
                For farther development;
                Opening/Creating projects isn't developed yet
                */
                projectId = Math.floor(Math.random() * 100000000)
                window.location.replace("#" + projectId)
            } else {
                // Same as above
            }
        </script>
    </head>
    <body>
    	<script>
    		if (window.location.href.slice(0,5) === "http:") {
    		    window.location.replace("https" + window.location.href.slice(4));
    		}
    	</script>
        <div id="menus">
            <a href="../.." id="home-btn">ElementNetwork&#8480;</a><a href="javascript:void(0)" id="file-menu">File</a><!-- href's are javascript:void(0), because href=# would delete the project ID --><a href="javascript:void(0)" id="edit-menu">Edit</a><a href="javascript:void(0)" id="share-menu" style="cursor:not-allowed">Share</a><a href="../../help/editor" id="help-btn" target="_blank">Help</a>
        </div>
        <div id="ctrl-btns">
            <a href="javascript:void(0)" id="player-view">Preview in player!</a>
            <script>
                $('#player-view').click(function() {window.location = "../player/#" + projectId})
            </script>
        </div>
        <br />
        <ul id="file-options"></ul>
        <ul id="edit-options"></ul>
        <ul id="share-options"></ul>
        <script>
            var fileMenu = $("#file-options").attr("style", "list-style-type:none").text("").hide();
            var editMenu = $("#edit-options").attr("style", "list-style-type:none").text("").hide();
            var shareMenu = $("#share-options").attr("style", "list-style-type:none").text("").hide();
            document.getElementById("file-options").innerHTML = "<a class='menubtn' href=javascript:void(0)><li class='menuitem'>New...</li></a><a class='menubtn' href=javascript:void(0)><li class='menuitem' style='border-bottom: 1px solid black;border-collapse:collapse;cursor:not-allowed;color:grey'>Save</li></a><a class='menubtn' href=javascript:void(0)><li class='menuitem' style='border-top: 1px solid black;border-collapse:collapse'>Download</li></a><a class='menubtn' href=javascript:void(0)><li class='menuitem' style='border-bottom: 1px solid black;border-collapse:collapse'>Upload</li></a><a class='menubtn' href=javascript:void(0)><li class='menuitem' style='border-top: 1px solid black;border-collapse:collapse'>Compile...</li></a>";
            document.getElementById("edit-options").innerHTML = "<a class='menubtn' href='javascript:void(0)'><li class='menuitem' id='toggle-update-edit'>Disable auto-update...</li></a><a class='menubtn' href='javascript:void(0)'><li class='menuitem' id='update-edit' style='cursor:not-allowed;color:grey'>Update</li></a>"
            $(".menuitem").hover(function (event) {
                $(event.currentTarget).css({
                    "background-color": "LightGrey"
                })
            }, function(event) {
                $(event.currentTarget).css({
                    "background-color": "White"
                })
            }).css({
                "background-color": "White"
            });
            $(".menuitem").click(function(event) {
                if ($(event.currentTarget).text() === "New...") {
                    window.location.replace("#");
                    window.location.reload()
                }
            });
            var menus = {file:{},edit:{},share:{}}
            menus.file.toggle = false;
            menus.edit.toggle = false;
            menus.share.toggle = false;
            $('#file-menu').click(function () {
                if (!menus.file.toggle) {
                    menus.file.toggle = true;
                    if (menus.edit.toggle) {
                        menus.edit.toggle = false;
                        $(editMenu).slideUp();
                        setTimeout(function () {$(fileMenu).slideDown()}, 400);
                    } else if (menus.share.toggle) {
                        menus.share.toggle = false;
                        $(shareMenu).slideUp();
                        setTimeout(function () {$(fileMenu).slideDown()}, 400);
                    } else {
                        $(fileMenu).slideDown()
                    }
                } else {
                    menus.file.toggle = false;
                    $(fileMenu).slideUp()
                }
            })
            $('#edit-menu').click(function () {
                if (!menus.edit.toggle) {
                    menus.edit.toggle = true;
                    if (menus.file.toggle) {
                        menus.file.toggle = false;
                        $(fileMenu).slideUp();
                        setTimeout(function () {$(editMenu).slideDown()}, 400);
                    } else if (menus.share.toggle) {
                        menus.share.toggle = false;
                        $(shareMenu).slideUp();
                        setTimeout(function () {$(editMenu).slideDown()}, 400);
                    } else {
                        $(editMenu).slideDown()
                    }
                } else {
                    menus.edit.toggle = false;
                    $(editMenu).slideUp()
                }
            })
        </script>
        <script>
            var categories = {}
            function Block(type, spec, text, category, descriptor) {
                this.type = type;
                this.spec = spec;
                this.text = text;
                this.category = category;
                if (descriptor.parameterNameDefaults) {
                    this.paramaterNameDefaults = descriptor.parameterNameDefaults;
                }
                if (descriptor.buttonLeft) {
                    this.buttonLeft = descriptor.buttonLeft;
                }
                if (descriptor.buttonRight) {
                    this.buttonRight = descriptor.buttonRight;
                }
                this.desc = descriptor
                this.element = document.createElement("canvas");
                $(this.element).attr("id", spec).attr("class", "block");
                
            }
        </script>
    </body>
</html>
